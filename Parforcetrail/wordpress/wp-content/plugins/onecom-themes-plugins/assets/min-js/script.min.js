!function(e){function t(){TB_WIDTH=75*e(window).width()/100,TB_HEIGHT=85*e(window).height()/100,e("#TB_window").css({marginLeft:"-"+parseInt(TB_WIDTH/2,10)+"px",width:TB_WIDTH+"px"}),e("#TB_window").css({marginTop:"-"+parseInt(TB_HEIGHT/2,10)+"px",height:TB_HEIGHT+"px"})}e(document).ready(function(){screenshotPreview(),e(".one-install, .one-installed").click(function(){var t=e(this),a=e(this).parents(".one-theme:first"),o=e(this).attr("data-name"),n=e(this).attr("data-theme_slug"),r=e(this).attr("data-redirect"),i=onecom_vars.network;if("undefined"!=typeof o&&""!=o){"undefined"==typeof i&&(i=!1);var s={action:o,theme_slug:n,redirect:r,network:i};e(a).addClass("active"),e(".loading-overlay").addClass("show"),e.post(ajaxurl,s,function(o){var n=e.parseJSON(o);if(console.log(n),"undefined"!=typeof n.type&&"redirect"==n.type)window.location=n.url;else{e(".onecom-notifier").html(n.message).attr("type",n.type).addClass("show");var r=5e3;"success"==n.type&&(e(a).addClass("installed"),e(t).removeClass("one-install").addClass("one-installed"),e(t).find(".action-text").remove(),e(t).find("> span").append(n.button_html),e(t).attr("data-name","onecom_activate_theme"),r=1500),setTimeout(function(){e(".onecom-notifier").removeClass("show"),e(".loading-overlay").removeClass("show")},r)}})}}),e(document).on("click",".install-now, .activate-plugin-ajax",function(t){t.preventDefault();var a=e(this),o=e(this).parents(".one-plugin-card:first"),n=e(this).attr("data-download_url"),r=e(this).attr("data-slug"),i=e(this).attr("data-name"),s=e(this).attr("data-action"),d=e(this).attr("data-redirect"),l="undefined"!=typeof e(this).attr("data-plugin_type")?e(this).attr("data-plugin_type"):"";e(".loading-overlay").addClass("show");var c={action:s,plugin_slug:r,plugin_name:i,download_url:n,plugin_type:l,redirect:d};e.post(ajaxurl,c,function(t){var n=e.parseJSON(t);if(console.log(n),"undefined"!=typeof n.type&&"redirect"==n.type)window.location=n.url;else{e(".onecom-notifier").html(n.message).attr("type",n.type).addClass("show");var r=5e3;"success"==n.type&&(e(o).addClass("activate"),e(a).after(n.button_html),e(a).remove(),r=1500),setTimeout(function(){e(".onecom-notifier").removeClass("show"),e(".loading-overlay").removeClass("show")},r)}})})}),this.screenshotPreview=function(){xOffset=10,yOffset=30,e(".one-screenshot").hover(function(t){this.t=this.title,this.title="";var a=""!=this.t?"<br/>"+this.t:"";e("body").append("<p id='one-screenshot'><img src='"+e(this).attr("data-preview")+"' alt='url preview' />"+a+"</p>"),e("#screenshot").css("top",t.pageY-xOffset+"px").css("left",t.pageX+yOffset+"px").fadeIn("fast")},function(){this.title=this.t,e("#one-screenshot").remove()}),e(".one-screenshot").mousemove(function(t){e("#one-screenshot").css("top",t.pageY-xOffset+"px").css("left",t.pageX+yOffset+"px")})},e(window).on("resize",t),e(document).on("thickbox:iframe:loaded",function(a){t(),e("#TB_iframeContent").contents().find("head").append(e("<style type='text/css'> .plugin-install-php #plugin-information-footer {display:none !important;} </style>"))}),e(document).on("click",".preview_link",function(){var t=e(".theme-browser > div.one-theme").length,a=e(this).attr("data-demo-url");e("iframe").attr("src",a);var o=e(this).attr("data-id"),n=e(this).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id");e(".header_btn_bar .next").attr("data-demo-id",n);var r=e(this).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id");e(".header_btn_bar .previous").attr("data-demo-id",r),e(".header_btn_bar .theme-info").attr("data-theme-count",t),e(".header_btn_bar .theme-info").attr("data-active-demo-id",o),e(".header_btn_bar .next").removeAttr("style"),e(".header_btn_bar .previous").removeAttr("style");var i=e(this).attr("data-id"),s=e("#demo-"+i).closest(".one-theme").prev(".one-theme").length;0===s&&(e(".header_btn_bar .previous").css({opacity:"0.5",cursor:"initial"}),e(".header_btn_bar .previous").attr("data-demo-id","0"));var i=e(this).attr("data-id"),d=e("#demo-"+i).closest(".one-theme").next(".one-theme").length;0===d&&(e(".header_btn_bar .next").css({opacity:"0.5",cursor:"initial"}),e(".header_btn_bar .next").attr("data-demo-id","0")),tb_show("Preview Popup","#TB_inline?width=full&height=full&inlineId=thickbox_preview&modal=true&class=thickbox",null),e("body").addClass("preview_page")}),e(document).on("click",".close_btn",function(){tb_remove(),setTimeout(function(){e("body").removeClass("preview_page")},500)}),e(document).on("click","#desktop",function(){e(".preview-container .phone-content").removeClass("phone-content").addClass("desktop-content"),e(".preview-container .preview span").remove(".screen-rotate"),e(".preview-container").removeClass("scroll"),e(".preview-container iframe").removeClass("horizontal"),e(".desktop-content").removeClass("horizontal"),e("#desktop").addClass("current"),e("#mobile").removeClass("current")}),e(document).on("click","#mobile",function(){e(".preview-container .desktop-content").removeClass("desktop-content").addClass("phone-content"),e(".preview-container").addClass("scroll"),e(".preview-container .preview").append('<span class="screen-rotate"></span>'),e("#desktop").removeClass("current"),e("#mobile").addClass("current")}),e(document).on("click",".screen-rotate",function(){e(".preview-container iframe").toggleClass("horizontal"),e(".phone-content").toggleClass("horizontal")}),e(document).on("click",".header_btn_bar .next",function(){var t=e(this).attr("data-demo-id"),a=e("#preview_box .theme-info").attr("data-active-demo-id"),o=e("#demo-"+t).closest(".one-theme").next(".one-theme").length;if("0"===t)event.stopPropagation();else if(0===o){e(this).css({opacity:"0.5",cursor:"initial"}),e(this).attr("data-demo-id",0),e(".header_btn_bar .previous").attr("data-demo-id",a);var n=e("#demo-"+t).attr("data-demo-url");e("iframe").attr("src",n),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}else{e(".header_btn_bar .previous").removeAttr("style");var n=e("#demo-"+t).attr("data-demo-url");e("iframe").attr("src",n);var r=e("#demo-"+t).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id");e(this).attr("data-demo-id",r),e(".header_btn_bar .previous").attr("data-demo-id",a),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}}),e(document).on("click",".header_btn_bar .previous",function(){var t=e(this).attr("data-demo-id"),a=e("#preview_box .theme-info").attr("data-active-demo-id"),o=e("#demo-"+t).closest(".one-theme").prev(".one-theme").length;if("0"===t)event.stopPropagation();else if(0===o){e(this).css({opacity:"0.5",cursor:"initial"}),e(this).attr("data-demo-id",0),e(".header_btn_bar .next").attr("data-demo-id",a);var n=e("#demo-"+t).attr("data-demo-url");e("iframe").attr("src",n),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}else{e(".header_btn_bar .next").removeAttr("style");var n=e("#demo-"+t).attr("data-demo-url");e("iframe").attr("src",n);var r=e("#demo-"+t).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id");e(this).attr("data-demo-id",r),e(".header_btn_bar .next").attr("data-demo-id",a),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}})}(jQuery);